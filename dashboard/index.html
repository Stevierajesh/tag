<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Tag Server Dashboard</title>
    <link rel="stylesheet" href="dashboard.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>

<body>

    <header>
        <h1>TAG — Live Server Dashboard</h1>
        <span id="server-dot" class="status-dot"></span>
        <span id="server-text" class="status-text">Connecting…</span>

    </header>

    <main>
        <!-- LEFT: Games List -->
        <section class="panel games-panel">
            <h2>Active Games</h2>
            <ul id="games-list">
                <!-- populated by dashboard.js -->
            </ul>
        </section>

        <!-- CENTER: Game Details -->
        <section class="panel game-details">
            <h2>Game Details</h2>

            <div class="details-grid">
                <div><label>Game ID</label><span id="detail-game-id">—</span></div>
                <div><label>Phase</label><span id="detail-phase">—</span></div>
                <div><label>Circle Radius</label><span id="detail-radius">—</span></div>
                <div><label>Center</label><span id="detail-center">—</span></div>
                <div><label>Timer</label><span id="detail-timer">—</span></div>
            </div>

            <div class="game-actions-section">
                <h3>Actions</h3>
                <div class="game-actions">
                    <button class="delete-game-btn">Delete Game</button>
                    <button class="log-locations-btn">Log Location</button>
                    <button class="toggle-log-block-btn">LOG AR POS</button>
                    <button id="map-toggle-btn" class="control-btn">
                        Open Map
                    </button>
                    <button id="threedmap-toggle-btn" class="control-btn">
                        3D View
                    </button>
                    

                </div>
            </div>

            <h3>Players</h3>
            <div class="table-scroll">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Status</th>
                            <th>Admin</th>
                            <th> X</th>
                            <th> Y</th>
                            <th> Z</th>
                            <th>Socket</th>
                        </tr>
                    </thead>
                    <tbody id="players-table">
                        <!-- populated by dashboard.js -->
                    </tbody>
                </table>
            </div>

        </section>

        <!-- RIGHT: Raw State -->
        <section class="panel raw-panel">
            <div class="panel-header">
                <h2>Raw State</h2>
                <button id="copy-raw-btn" class="control-btn copy-raw-btn">Copy</button>
            </div>
            <div class="raw-content">
                <pre id="raw-json">
{
  "games": {},
  "players": {},
  "playerSockets": {}
}
                </pre>
            </div>
        </section>
    </main>

    <footer>
        <span>Refresh: 1s</span>
        <span>Memory Only • Redis Planned</span>
    </footer>
    <div id="map-modal" class="map-modal hidden">
        <div class="map-card">
            <div class="map-header">
                <span>Live Player Map</span>
                <button id="map-close-btn">✕</button>
            </div>
            <div id="map"></div>
            <div class="resize-handle nw" data-resize="nw"></div>
            <div class="resize-handle ne" data-resize="ne"></div>
            <div class="resize-handle sw" data-resize="sw"></div>
            <div class="resize-handle se" data-resize="se"></div>
        </div>
    </div>
    <div id="threedmap-overlay" class="hidden">
        <div class="threedmap-panel">
            <h3>Select Player Perspective</h3>
            <div id="threedmap-player-list"></div>

            <div class="threedmap-actions">
                <button id="threedmap-cancel" class="control-btn danger">
                    Cancel
                </button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script type="module" src="dashboard.js"></script>
</body>

</html>
